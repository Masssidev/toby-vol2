# 스프링의 기타 기술과 효과적인 학습 방법
스프링은 자바 엔터프라이즈 개발에 사용되는 다양한 기술 영역을 지원하는 방대한 기능을 제공한다. 스프링의 자체 기술은 물론이고, 표준 기술과 주요 오픈소스 
기술에 대한 지원 기능도 제공된다.
<hr/>

### 스프링 기술과 API를 효과적으로 학습하는 방법
스프링은 일관된 방식으로 개발된 프레임워크다. 모든 코드와 API가 동일한 원리에 기반을 두고 만들어져 있다. 바로 DI다.
#### 빈으로 등록되는 스프링 클래스와 DI
###### 어떤 오브젝트가 빈으로 사용된다의 의미
1. 다른 빈에 의해 DI 돼서 사용되는 서비스다.
2. 다른 빈이나 정보에 의존하고 있다.

###### ex) DataSourceTransactionManager
스프링이 빈으로 등록하는 방법을 통해 제공하는 기능인 DataSourceTransactionManager를 제대로 공부하기
##### 구현 인터페이스 분석
###### 구현 인터페이스가 무엇인지 파악하는 방법
1. 스프링 API 문서에서 DataSourceTransactionManager 항목을 찾아본다.
2. IDE에서 클래스의 타입 계층구조를 보는 기능을 사용한다.
##### 프로퍼티 분석
빈의 클래스의 설정 방법과 학장 방법을 살펴봐야한다. 빈 클래스의 활용 방법, 확장 방법, 디폴트와 다른 동작을 가능하게 하는 방법에 관한 지식은 대부분 클래스의 
프로퍼티를 살펴보면 알 수 있다.
##### DI/확장 포인트 분석
DataSourceTransactionManager가 DataSource라는 인터페이스를 통해 다른 빈을 참조한다는 건 DI의 모든 기능을 활용할 수 있는 확장 포인트를 갖고 있다고 이해할 수 있다.

스프링이 실제 DB 커넥션을 지원하는 DataSource와 DataSource 타입의 프로퍼티를 갖는 빈 사이에 데코레이터 패턴이나 프록시 패턴을 이용해 부가기능 또는 접근제어 기능을 
제공해주는 빈을 만들려고 할 때 유용한 기반 클래스 DelegatingDataSource를 제공해준다.
* 스프링이 제공하는 DelegatingDataSource를 기반으로 하는 다양한 데코레이터 또는 프록시
    * LazyConnectionDataSourceProxy
      * LazyConnectionDataSourceProxy는 트랜잭션 매니저와 실제 DataSource 사이에서 DB 커넥션 생성을 최대한 지연시켜주는 기능을 제공해준다.
    * AbstractRoutingDataSource
      * AbstractRoutingDataSource는 추상 클래스이므로 상속을 통해 기능을 추가하고 사용해야 한다. 스프링은 AbstractRoutingDataSource의 서브클래스로 
      IsolationLevelDataSourceRouter를 제공하고 있다.
      * AbstractRoutingDataSource는 다중 DataSource에 대한 라우팅을 제공하는 프록시다. 여러 개의 DataSource가 존재하지만 DAO나 트랜잭션 매니저에는 하나의 
      DataSource만 존재하는 것처럼 사용하도록 만들어야 할 때 사용한다.
<hr/>

### IoC 컨테이너와 DI
DispatcherServlet과 마찬가지로 스프링 IoC/DI 컨테이너, 즉 애플리케이션 컨텍스트도 그 자체로는 빈은 아니지만 DI를 받는다. 직접 ```<property>```를 사용해 설정해줄 수는 없지만 애플리케이션 컨텍스트는 자신의 확장 포인트 인터페이스를 구현한 빈을 찾아서 스스로 DI 한다. 엄밀히 말하면 DL 이라고 볼 수 있다.
#### BeanPostProcessor와 BeanFactoryPostProcessor
가장 많이 사용되는 IoC 컨테이너의 확장 포인트는 바로 빈 후처리기와 빈 팩토리 후처리기다. 빈 후처리기는 BeanPostProcessor 인터페이스로 정의되어 있고 실제 빈 오브젝트를 생성하는 시점에서 사용된다. 빈 팩토리 후처리기는 BeanFactoryPostProcessor 인터페이스를 사용하고 빈 설정 메타데이터가 준비된 시점에서 사용된다.
> 이 두 가지 확장 포인트 외에도 컨테이너 레벨의 이벤트와 리스너 구현, XML의 프로퍼티 값에 대한 프로퍼티 에디터나 컨버전 서비스, 국제화 지원과 같은 IoC의 확장 포인트도 사용할 수 있다.
<hr/>

### SpEL
자바에는 다양한 종류의 표현식 언어가 존재한다. JSP에서 사용되는 JSP EL을 비롯해서, 오픈소스 프로젝트의 제품인 MVEL이나, JBoss가 제공하는 JBoss EL도 있다. 스프링은 지금까지 다양한 표준 EL이나 오픈소스 EL을 사용해왔는데, 스프링 3.0부터는 좀 더 강력하고 유연하면서도 스프링에 잘 접목돼서 사용할 수 있는 스프링 전용 EL을 직접 제공하기 시작했다. 스프링 EL은 보통 SpEL이라는 약자로 표기한다.
#### SpEL 사용 방법
SpEL을 코드에서 사용하려면 기본적으로 두 가지 인터페이스를 활용해야 한다.
1. ExpressionParser
   * 표현식을 파싱하는 기능이 정의되어 있는 인터페이스다.
2. Expression
   * 파서에 의해 해석된 표현식 정보를 가진 오브젝트의 타입이다.
> 한 번 파싱한 Expression 오브젝트를 재사용할 수 있기 때문에 파서로부터 바로 파싱을 해서 결과 값을 받지 않고, 일단 Expression 타입의 오브젝트로 만든 다음 값을 가져온다.
<hr/>

### OXM
스프링 OXM은 서비스 추상화가 적용된 기술이다. 트랜잭션이나 OXM 같은 서비스 추상화는 먼저 스프링이 제공하는 인터페이스의 사용 방법을 익히고, 각 기술별로 제공되는 어댑터 빈의 설정 방법을 살펴봐야 한다. 서비스 추상화를 통해 OXM 구현 기술이 바뀌더라도 이를 사용하는 코드에는 영향을 주지 않으므로, 익숙한 구현 기술 하나를 선택해서 집중적으로 분석하고 실제 코드에 적용해보면서 사용 방법을 익히는 것이 중요하다.
> 스프링에서 OXM 추상화를 적용하는 방법은 코드에서 직접 마샬러 빈을 가져와 Marshaller 인터페이스를 이용해서 XML과 오브젝트 사이의 변경 작업을 수행하는 방법과 웹 환경에서 XML 뷰나 XML 메시지 컨버터를 만들 때 활용하는 방법이 있다.
#### Marshaller/Unmarshaller 인터페이스
* Marshaller는 오브젝트를 XML로 변환하는 기능을 추상화한 인터페이스다.
* Unmarshaller는 XML 소스로부터 오브젝트를 변환해주는 기능을 정의한 인터페이스다.
#### OXM 기술 어댑터 클래스
* Marshaller와 Unmarshaller 추상 인터페이스를 구현해서 각 OXM 기술과 연결해주는 어댑터 클래스는 총 다섯가지가 있다. 기본 지원 기술은 Castor, JAXB, XMLBeans, JiBX, XStream이다. 각 기술 이름 뒤에 Marshaller를 붙이면 지원 클래스다.
* 하나의 어댑터 클래스가 Marshaller와 Unmarshaller를 모두 구현하고 있다. 비록 같은 오브젝트이지만 각각 접근하는 인터페이스가 다르고 용도가 다르므로 별개의 프로퍼티로 주입받는 것이 좋다.
<hr/>

### 리모팅과 웹 서비스, EJB
